<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Сказочки — тестовая страница</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-top:#1a1233;
      --bg-btm:#0a0715;
      --text:#eaeaea;
      --button:#232323;
      --radius:22px;
      --radius-sm:14px;
      --shadow: 0 20px 60px rgba(0,0,0,.55);
    }
    *{ box-sizing: border-box }
    html,body{ height:100%; margin:0 }
    body{
      font-family: 'Montserrat', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
      background: linear-gradient(to bottom, #190829 0%, #010007 100%);
      color: var(--text);
      background-attachment: fixed;
    }
    a{ color: var(--text);
      background-attachment: fixed; }
    .phone{ width:100%; max-width:420px; min-height: 100vh; margin:0 auto; padding: 24px 20px 36px; }
    .hero{ font-weight: 900; font-size: 40px; line-height: 1.05; letter-spacing: .2px; }
    .row{ display:flex; align-items:center; gap:12px; }
    .card{ background: rgba(0,0,0,.28); border:1px solid rgba(255,255,255,.06); border-radius:16px; padding:14px; }
    .tile{ background:#2f2f2f; border:1px solid rgba(255,255,255,.06); border-radius:18px; padding:12px 14px; display:flex; align-items:center; }
    .chip{ background:#4a4a4a; color:#cfcfcf; border-radius:12px; padding:8px 12px; font-size:14px; }
    .teaser-title{ font-weight:700; }
    .teaser-author{ font-size:13px; color:#bfbfbf }
    .teaser-time{ margin-left:auto; color:#bfbfbf; }
    .modal{ position: fixed; inset: 0; display: none; z-index: 50; }
    .modal.open{ display:grid; place-items:center; }
    .backdrop{ position:absolute; inset:0; background: rgba(0,0,0,.35); -webkit-backdrop-filter: blur(12px) saturate(120%); backdrop-filter: blur(12px) saturate(120%); }
    .sheet{ position:relative; width:min(360px, calc(100% - 24px)); background: #4a4a4a; border-radius: var(--radius); padding: 20px 16px 16px; box-shadow: var(--shadow); border: 1px solid rgba(255,255,255,.12); color:#e6e6e6; }
    .sheet h2{ margin: 0 0 14px 0; font-size: 28px; font-weight: 900; text-transform: uppercase; text-align:center; }
    .sheet p{ margin: 10px 0; font-size: 15px; line-height: 1.6; text-align:justify; }
    .sheet .cta{ margin-top: 12px; display:flex; align-items:center; justify-content: center; }
    .btn{ appearance: none; border: 0; background: var(--button); color: #fff; border-radius: var(--radius-sm); padding: 12px 18px; font-weight: 800; letter-spacing:.2px; cursor: pointer; }
    .btn:active{ transform: translateY(1px) }
    .terms{ width:100%; max-width:420px; min-height: 100vh; margin:0 auto; padding: 24px 20px 36px; }
    .terms h1{ margin: 0 0 18px 0; font-weight: 900; text-transform: uppercase; font-size: 36px; text-align:center; }
    .terms p{ margin: 6px 0; text-align:justify; }
    .page{ display:none; } .page.active{ display:block; }
  
@media (max-width: 400px){
  .hero{ font-size: 32px; }
  .sheet h2{ font-size: 24px; }
}
@media (min-width: 800px){
  body{ display:flex; justify-content:center; }
}


.sheet{
  max-height: 90vh;
  overflow-y: auto;
}

</style>
</head>
<body>
  <section id="page-home" class="page active" aria-label="Home">
    <div class="phone">
      <div class="hero">Для самой маленькой и<br>любимой принцессы..</div>
      <div style="height:20px"></div>
      <div class="row card" style="gap:14px; width: 320px;">
        <div style="width:46px;height:46px;border-radius:12px;background:#bdbdbd;"></div>
        <div>
          <div class="teaser-title">Название сказки</div>
          <div class="teaser-author">Автор сказки</div>
        </div>
        <div class="teaser-time">00:00</div>
      </div>
      <div style="height:14px"></div>
      <div class="tile" style="gap:12px; width: 320px;">
        <div class="chip">Сказочка доступна через:</div>
        <div style="margin-left:auto; color:#cfcfcf; font-weight:700;">00:00</div>
      </div>
    </div>
    <div id="welcome" class="modal" role="dialog" aria-modal="true">
      <div class="backdrop" aria-hidden="true"></div>
      <div class="sheet">
        <h2>ИНСТРУКЦИЯ ДЛЯ ТЕХ, У КОГО ЛАПКИ</h2>
        <p>Привет моё солнышко. Если ты это читаешь, то я безумно рад, что у меня всё получилось!</p>
        <p>Сейчас у нас с тобой не самый лёгкий период, но как бы то нибыло я верю в нас, верю в то что мы с тобой справимся. Ты у меня большая молодец и я горд за то, что именно ты моя девушка. Я счастлив, что мне повезло раздель минуты своей жизни именно с тобой. У тебя всё получится, ты главное не опускай свои лапки. </p>
        <p>Как-то раз я говорил, что сделаю для тебя сборник сказочек, чтобы ты могла их слушать и засыпать. По этому я немного поднапрягся и собрал для тебя мини сборничек, чтобы ты после тяжёлого дня могла включать их и немножно отдыхать от всех хлапот.</p>
        <p>Чтобы тебе было интереснее, я сделал следующую систему - каждая сказочка будет публиковаться тут в 20:00 по МСК. Постарался подобрать более менее оптимальное время чтобы тебе было удобненько. Время на телефоне  ты можешь не перематывать, я продумал эту систему, зная какая ты вафелька :З</p>
        <p>Если тебе всё понятно, то прочти <a id="link-terms" href="#terms" style="text-decoration:underline;">пользовательское соглашение</a> и вперёд!</p>
        <div class="cta"><button id="btn-ugum" class="btn" style="display:none">УГУМ</button></div>
      </div>
    </div>
  </section>

  <section id="page-terms" class="page" aria-label="Terms" style="background: linear-gradient(to bottom, #190829 0%, #010007 100%);">
    <div class="terms">
      <h1>Я ЛЮБЛЮ ТЕБЯ!</h1>
      <div style="width: 330px;">
        <p>Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!Я люблю тебя!</p>
      </div>
      <div style="height:16px"></div>
      <div style="display:grid; place-items:center;">
        <button id="btn-accept" class="btn">ПРИНИМАЮ ПОЛЬЗОВАТЕЛЬСКОЕ СОГЛАШЕНИЕ</button>
      </div>
    </div>
  </section>

  <script>
    const KEY_ACCEPTED = 'hasAcceptedTerms';
    const KEY_WELCOME_DONE = 'welcomeDone';

    const PAGES = { home: document.getElementById('page-home'), terms: document.getElementById('page-terms') };
    const welcome = document.getElementById('welcome');
    const btnUgum = document.getElementById('btn-ugum');
    const btnAccept = document.getElementById('btn-accept');

    function route(){
      const r = (location.hash.replace('#','') || 'home').toLowerCase();
      for(const k in PAGES) PAGES[k].classList.toggle('active', k===r);
      if(r==='home') renderWelcome();
    }
    window.addEventListener('hashchange', route);

    function renderWelcome(){
      const accepted = localStorage.getItem(KEY_ACCEPTED) === 'true';
      const done = localStorage.getItem(KEY_WELCOME_DONE) === 'true';
      welcome.classList.toggle('open', !done);
      btnUgum.style.display = accepted ? 'inline-flex' : 'none';
    }
    btnAccept?.addEventListener('click', ()=>{
      localStorage.setItem(KEY_ACCEPTED, 'true');
      location.hash = '#home'; setTimeout(renderWelcome, 0);
    });
    btnUgum?.addEventListener('click', ()=>{
      localStorage.setItem(KEY_WELCOME_DONE, 'true');
      renderWelcome();
    });

    // reset helpers
    (function(){
      const q = new URLSearchParams(location.search);
      if(q.get('reset')==='1' || location.hash.toLowerCase()==='#reset'){
        localStorage.removeItem(KEY_ACCEPTED);
        localStorage.removeItem(KEY_WELCOME_DONE);
        history.replaceState(null,'',location.pathname+'#home');
      }
    })();

    
    // ===== Home / Content countdown (Moscow time) =====
    const NEXT_RELEASE_ISO = '2025-08-12T20:00:00+03:00'; // <-- поставь свою дату/время (МСК)
    const timerEl = document.querySelector('#page-home .tile div:last-child');
    async function getMoscowNow(){
      try{
        const r = await fetch('https://worldtimeapi.org/api/timezone/Europe/Moscow', {cache:'no-store'});
        if(!r.ok) throw new Error('time api');
        const j = await r.json();
        return new Date(j.datetime);
      }catch(e){
        return new Date(); // fallback: локальное время
      }
    }
    (async function startCountdown(){
      let now = await getMoscowNow();
      function tick(){
        const target = new Date(NEXT_RELEASE_ISO);
        const diff = target - now;
        if(diff <= 0){
          timerEl.textContent = '00:00';
          return;
        }
        const hh = Math.floor(diff/1000/3600);
        const mm = Math.floor(diff/1000/60)%60;
        const ss = Math.floor(diff/1000)%60;
        timerEl.textContent = String(hh).padStart(2,'0') + ':' + String(mm).padStart(2,'0') + ':' + String(ss).padStart(2,'0');
        now = new Date(now.getTime() + 1000);
        setTimeout(tick, 1000);
      }
      tick();
    })();

    route();
  </script>
</body>
</html>
